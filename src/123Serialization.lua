---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by wangyu.
--- DateTime: 2019-2-21 14:36
--- 字符串的串行化。 字符串经常会有一些特殊符号。用%q和string.format来处理
local str1 = [[--这种方式可以表达一块字符串，但是如果里面包含[]就会出错
    <html></html>,#/. [][]
]]
print(str1)

local str2 = 'heloo, "sdfsdf",'--这种''的方式当出现'''的时候就会报错
print(str2)

---最安全的是这种方式%q, 配合string.format
print("------------")
local ss1 = 'anthoer, "other", \'[[]]'--第一种定义方式
local ss = "\"\"_''''"--第二种定义方式
print(ss)
local str3 = string.format("%q", ss)--这种方式很牛逼。能直接转换成带转移字符的
print(str3)

---保存
function serialization (o)
    if type(o) == "number" then
        io.write(o)
    elseif type(o) == "string" then
        io.write(string.format("%q", o))
    elseif type(o) == "table" then
        io.write("{\n")
        for k, v in pairs(o) do
            --io.write(" ", k, " = ")
            io.write("  ["); serialization(k);io.write("] = ")
            serialization(v)
            io.write(",\n")
        end
        io.write("}\n")
    end
end
print("----------")
local tt = {a = 12, b = "Lua", c = 'anthoer, "other"', 100}
serialization(tt)
